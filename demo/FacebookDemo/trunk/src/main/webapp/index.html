<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
  <title>Facebook Connect Demo 1</title>
  <style type="text/css">
    @import "js/dojo-1.1.1/dojo/resources/dojo.css";
    @import "js/dojo-1.1.1/dojox/grid/_grid/tundraGrid.css";
    @import "js/dojo-1.1.1/dijit/themes/tundra/tundra.css";
    
    html, body, .mainDiv {
      width: 100%;
      height: 100%;
      padding: 0;
      border: 0;
      margin: 0;
    }
    
    .userbox {
      vertical-align: middle;
    }
  </style>

  <!-- Dojo import -->
  <script type="text/javascript"
          src="js/dojo-1.1.1/dojo/dojo.js"
          djConfig="parseOnLoad: true, isDebug: false">
  </script>
  
  <script type="text/javascript">
    dojo.require("dojo.parser");
    dojo.require("dijit.layout.BorderContainer");
    dojo.require("dijit.layout.ContentPane");
    dojo.require("dijit.form.Button");
  </script>
  
  <!--  FACEBOOK code -->
  <script type="text/javascript">
    function show_user() {
       var node = document.getElementById("userbox");
       node.innerHTML = 
             "<table>"
           + "  <tbody><tr>"
           + "    <td>"
           + "      <fb:profile-pic uid='loggedinuser' facebook-logo='true'></fb:profile-pic>"
           + "    </td><td>"
           + "      <span>Welcome, <fb:name uid='loggedinuser' useyou='false'></fb:name>.  You are signed in with"
           + "      your facebook account. <button dojoType='dijit.form.Button' onclick='do_logout();'>logout</logout></span>"
           + "    </td>"
           + "  </tr></tbody>"
           + "</table>"
       FB.XFBML.Host.parseDomTree();
       dojo.parser.parse(node);
    }
    function do_logout() {
        FB.Connect.logout(function() {
            var node = document.getElementById("userbox");
            node.innerHTML = "<fb:login-button onlogin='show_user();'></fb:login-button>";
            FB.XFBML.Host.parseDomTree();
        });
    }
  </script>
  
</head>

<body class="tundra">
  <div class="mainDiv" dojoType="dijit.layout.BorderContainer" design="headline" liveSplitters="true" gutters="true">
    <div dojoType="dijit.layout.ContentPane" region="top" splitter="false" style="height: 55px;">
      <div id="userbox" class="userbox">
        <fb:login-button onlogin="show_user();"></fb:login-button>
      </div>
    </div>
    <div dojoType="dijit.layout.ContentPane" region="left" splitter="true" style="width: 350px;">
    </div>
    <div dojoType="dijit.layout.ContentPane" region="center" splitter="true">
    </div>
  </div>
  
  
  <script src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php" type="text/javascript"></script>
  <script type="text/javascript">
    FB.init("c77ef4b86b5c5442c67898ba963d8735", "xd_receiver.htm");
    FB.Connect.ifUserConnected(show_user);  
  </script>
</body>
</html>
